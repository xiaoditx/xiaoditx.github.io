<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>XiaoDi â€“ Code: Pitfall Diaries</title>
    <link>http://localhost:11633/en/categories/code-pitfall-diaries/</link>
    <description>Recent content in Code: Pitfall Diaries on XiaoDi</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Tue, 26 Aug 2025 00:00:00 +0000</lastBuildDate>
    
	  <atom:link href="http://localhost:11633/en/categories/code-pitfall-diaries/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>VScode Plugin Reports Error, but g&#43;&#43; Compiles Perfectly? Analyzing the Cause of API Call Errors</title>
      <link>http://localhost:11633/en/blog/2025-08-26_vscode%E6%8F%92%E4%BB%B6%E6%8A%A5%E9%94%99g&#43;&#43;%E5%8D%B4%E5%AE%8C%E7%BE%8E%E7%BC%96%E8%AF%91api%E8%B0%83%E7%94%A8%E9%94%99%E5%9B%A0%E5%88%86%E6%9E%90/</link>
      <pubDate>Tue, 26 Aug 2025 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:11633/en/blog/2025-08-26_vscode%E6%8F%92%E4%BB%B6%E6%8A%A5%E9%94%99g&#43;&#43;%E5%8D%B4%E5%AE%8C%E7%BE%8E%E7%BC%96%E8%AF%91api%E8%B0%83%E7%94%A8%E9%94%99%E5%9B%A0%E5%88%86%E6%9E%90/</guid>
      <description>
        
        
        &lt;div class=&#34;hx:overflow-x-auto hx:mt-6 hx:flex hx:flex-col hx:rounded-lg hx:border hx:py-4 hx:px-4 hx:border-gray-200 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200&#34;&gt;
  &lt;p class=&#34;hx:flex hx:items-center hx:font-medium&#34;&gt;&lt;svg height=16px class=&#34;hx:inline-block hx:align-middle hx:mr-2&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; fill=&#34;none&#34; viewBox=&#34;0 0 24 24&#34; stroke-width=&#34;2&#34; stroke=&#34;currentColor&#34; aria-hidden=&#34;true&#34;&gt;&lt;path stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34; d=&#34;M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&#34;/&gt;&lt;/svg&gt;Note&lt;/p&gt;

  &lt;div class=&#34;hx:w-full hx:min-w-0 hx:leading-7&#34;&gt;
    &lt;div class=&#34;hx:mt-6 hx:leading-7 hx:first:mt-0&#34;&gt;&lt;p&gt;This page uses AI technology for translation. The content is for reference only.&lt;/p&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A while ago, I wrote a &lt;a href=&#34;https://github.com/xiaoditx/BeepMusic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;small application&lt;/a&gt; and wanted to add a read/write configuration function. Having only learned C++ for a few days, I searched online for a long time and found two Windows APIs: &lt;code&gt;GetPrivateProfileString&lt;/code&gt; for reading INI files and &lt;code&gt;WritePrivateProfileString&lt;/code&gt; for writing them. Following online tutorials, I wrote these three lines:&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;LPTSTR&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lpPath&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX_PATH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;strcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lpPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;.&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;config.ini&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WritePrivateProfileString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;config&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;t&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;120&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lpPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;Copy code&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Right after writing, the plugin in VScode instantly flagged it in red and gave the following error:
&lt;img src=&#34;http://localhost:11633/imgs/blogs/VScode%e6%8a%a5%e9%94%99%ef%bc%8cg&amp;#43;&amp;#43;%e9%80%9a%e8%bf%87%ef%bc%8cGetPrivateProfileString/184a967e89d542c3be6e63b16667e2a3.png&#34; alt=&#34;VScode plugin error&#34;  loading=&#34;lazy&#34; /&gt;
But I was sure I followed the tutorial exactly. So where was the problem?&lt;/p&gt;
&lt;p&gt;I tried to compile it, and the result was surprising: g++ compiled successfully without any errors and created &lt;code&gt;config.ini&lt;/code&gt; in the current directory, writing the specified content.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:11633/imgs/blogs/VScode%e6%8a%a5%e9%94%99%ef%bc%8cg&amp;#43;&amp;#43;%e9%80%9a%e8%bf%87%ef%bc%8cGetPrivateProfileString/83ab9c632d1e463596644c4afcc60d14.png&#34; alt=&#34;g&amp;#43;&amp;#43; compilation result&#34;  loading=&#34;lazy&#34; /&gt;&lt;/p&gt;
&lt;p&gt;This was strange. Time to check the official documentation.&lt;/p&gt;
&lt;p&gt;I went to MSDN and searched for &lt;code&gt;WritePrivateProfileString&lt;/code&gt; but couldn&amp;rsquo;t find it. I only found &lt;code&gt;WritePrivateProfileStringA&lt;/code&gt; and &lt;code&gt;WritePrivateProfileStringW&lt;/code&gt; (both have an extra letter at the end).&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:11633/imgs/blogs/VScode%e6%8a%a5%e9%94%99%ef%bc%8cg&amp;#43;&amp;#43;%e9%80%9a%e8%bf%87%ef%bc%8cGetPrivateProfileString/9e5fe8e0a5074f0ba5d570c9a3ef2023.png&#34; alt=&#34;MSDN related content&#34;  loading=&#34;lazy&#34; /&gt;&lt;/p&gt;
&lt;p&gt;No choice, I clicked on one to check. I chose &lt;code&gt;WritePrivateProfileStringA&lt;/code&gt;. Hmm, the parameter types seemed wrong. The tutorial used &lt;code&gt;LPTSTR&lt;/code&gt;, but here it specified &lt;code&gt;LPCSTR&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Scrolling down, below the &lt;code&gt;Example&lt;/code&gt; section, I saw a note:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The winbase.h header defines WritePrivateProfileString as an alias which automatically selects the ANSI or Unicode version of this function based on the definition of the UNICODE preprocessor constant. Mixing usage of the encoding-neutral alias with code that is not encoding-neutral can lead to mismatches that result in compilation or runtime errors. For more information, see Conventions for Function Prototypes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This means &lt;code&gt;WritePrivateProfileString&lt;/code&gt; is not the API&amp;rsquo;s real name; it&amp;rsquo;s selected conditionally.&lt;/p&gt;
&lt;p&gt;Back in VScode, I held Ctrl and clicked on &lt;code&gt;WritePrivateProfileString&lt;/code&gt; to see the content in &lt;code&gt;Windows.h&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#ifdef UNICODE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define WritePrivateProfileString  WritePrivateProfileStringW
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define WritePrivateProfileString  WritePrivateProfileStringA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;Copy code&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;VScode showed that the upper condition was active, proving that the &lt;code&gt;UNICODE&lt;/code&gt; macro was defined in VScode&amp;rsquo;s environment.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:11633/imgs/blogs/VScode%e6%8a%a5%e9%94%99%ef%bc%8cg&amp;#43;&amp;#43;%e9%80%9a%e8%bf%87%ef%bc%8cGetPrivateProfileString/389e5b23cc314530822b326a0f848859.png&#34; alt=&#34;Conditional compilation&#34;  loading=&#34;lazy&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Mystery solved! Because VScode had the &lt;code&gt;UNICODE&lt;/code&gt; macro defined while g++ did not, the plugin checked the code against &lt;code&gt;WritePrivateProfileStringW&lt;/code&gt;, expecting Unicode and a path stored in &lt;code&gt;wchar_t&lt;/code&gt; (wide characters). When g++ compiled, it used &lt;code&gt;WritePrivateProfileStringA&lt;/code&gt;, expecting ANSI and a path stored in &lt;code&gt;char&lt;/code&gt; (regular characters). Thus, our code using &lt;code&gt;char&lt;/code&gt; worked fine under g++ but failed the VScode plugin&amp;rsquo;s check.&lt;/p&gt;
&lt;p&gt;Therefore, our code was correct, but the plugin flagged it as an error due to the different environment. The solution is to explicitly specify that we want to use the &lt;code&gt;WritePrivateProfileStringA&lt;/code&gt; function:&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lpPath&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX_PATH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;strcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lpPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;.&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\\&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;config.ini&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WritePrivateProfileStringA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;LiMing&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Sex&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Man&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lpPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lpPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;Copy code&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And that&amp;rsquo;s it. The annoying warning finally disappeared.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Appendix:&lt;/strong&gt; Specific meanings of LPxxxSTR data types&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Core Base Types:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CHAR&lt;/code&gt;: Represents an &lt;strong&gt;ANSI&lt;/strong&gt; (8-bit) character (&lt;code&gt;char&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;WCHAR&lt;/code&gt;: Represents a &lt;strong&gt;wide character&lt;/strong&gt; (Unicode, typically 16-bit UTF-16) (&lt;code&gt;wchar_t&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;TCHAR&lt;/code&gt;: An &lt;strong&gt;adaptive character type&lt;/strong&gt;. Compiles to &lt;code&gt;CHAR&lt;/code&gt; or &lt;code&gt;WCHAR&lt;/code&gt; based on project settings (whether the &lt;code&gt;_UNICODE&lt;/code&gt; macro is defined). Used for writing code that can be compiled for either ANSI or Unicode.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;String Pointer Types:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LPSTR&lt;/code&gt;: &lt;strong&gt;Long Pointer to STRing&lt;/strong&gt;. Points to a null-terminated &lt;strong&gt;ANSI&lt;/strong&gt; string (&lt;code&gt;CHAR*&lt;/code&gt;).
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;typedef CHAR* LPSTR;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LPWSTR&lt;/code&gt;: &lt;strong&gt;Long Pointer to Wide STRing&lt;/strong&gt;. Points to a null-terminated &lt;strong&gt;Unicode&lt;/strong&gt; (UTF-16) string (&lt;code&gt;WCHAR*&lt;/code&gt;).
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;typedef WCHAR* LPWSTR;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LPTSTR&lt;/code&gt;: &lt;strong&gt;Long Pointer to TCHAR STRing&lt;/strong&gt;. Points to a null-terminated &lt;strong&gt;adaptive character&lt;/strong&gt; (&lt;code&gt;TCHAR*&lt;/code&gt;) string. Depending on the &lt;code&gt;_UNICODE&lt;/code&gt; macro definition, it compiles to either &lt;code&gt;LPSTR&lt;/code&gt; (ANSI) or &lt;code&gt;LPWSTR&lt;/code&gt; (Unicode).
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;typedef TCHAR* LPTSTR;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Constant String Pointer Types:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LPCSTR&lt;/code&gt;: &lt;strong&gt;Long Pointer to Constant STRing&lt;/strong&gt;. Points to a null-terminated &lt;strong&gt;constant ANSI&lt;/strong&gt; string (&lt;code&gt;const CHAR*&lt;/code&gt;).
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;typedef const CHAR* LPCSTR;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LPCWSTR&lt;/code&gt;: &lt;strong&gt;Long Pointer to Constant Wide STRing&lt;/strong&gt;. Points to a null-terminated &lt;strong&gt;constant Unicode&lt;/strong&gt; (UTF-16) string (&lt;code&gt;const WCHAR*&lt;/code&gt;).
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;typedef const WCHAR* LPCWSTR;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LPCTSTR&lt;/code&gt;: &lt;strong&gt;Long Pointer to Constant TCHAR STRing&lt;/strong&gt;. Points to a null-terminated &lt;strong&gt;constant adaptive character&lt;/strong&gt; (&lt;code&gt;const TCHAR*&lt;/code&gt;) string. Depending on the &lt;code&gt;_UNICODE&lt;/code&gt; macro definition, it compiles to either &lt;code&gt;LPCSTR&lt;/code&gt; (ANSI) or &lt;code&gt;LPCWSTR&lt;/code&gt; (Unicode).
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;typedef const TCHAR* LPCTSTR;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Key Differences Summary Table:&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;Type&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;Character Width&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;Const-ness&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;Base Type Equiv (ANSI Build)&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;Base Type Equiv (Unicode Build)&lt;/th&gt;
          &lt;th style=&#34;text-align: left&#34;&gt;Description&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;LPSTR&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;ANSI (8-bit)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Non-const&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;char*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;char*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Pointer to ANSI string&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;LPCSTR&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;ANSI (8-bit)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;const&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;const char*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;const char*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Pointer to &lt;strong&gt;read-only&lt;/strong&gt; ANSI string&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;LPWSTR&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Unicode (16-bit)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Non-const&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;wchar_t*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;wchar_t*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Pointer to Unicode (UTF-16) string&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;LPCWSTR&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Unicode (16-bit)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;const&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;const wchar_t*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;const wchar_t*&lt;/code&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Pointer to &lt;strong&gt;read-only&lt;/strong&gt; Unicode (UTF-16) string&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;LPTSTR&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;Adaptive&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Non-const&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;char*&lt;/code&gt; (LPSTR)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;wchar_t*&lt;/code&gt; (LPWSTR)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Pointer to adaptive string (TCHAR*)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;LPCTSTR&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;Adaptive&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;strong&gt;const&lt;/strong&gt;&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;const char*&lt;/code&gt; (LPCSTR)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;&lt;code&gt;const wchar_t*&lt;/code&gt; (LPCWSTR)&lt;/td&gt;
          &lt;td style=&#34;text-align: left&#34;&gt;Pointer to &lt;strong&gt;read-only&lt;/strong&gt; adaptive string (const TCHAR*)&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Important Notes:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LP&lt;/code&gt; Prefix:&lt;/strong&gt; &amp;ldquo;Long Pointer&amp;rdquo; is a historical artifact. In modern 32/64-bit systems, all pointers are &amp;ldquo;long.&amp;rdquo; You can simply think of &lt;code&gt;LP&lt;/code&gt; as &amp;ldquo;Pointer to.&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;C&lt;/code&gt; Suffix:&lt;/strong&gt; Means &lt;code&gt;const&lt;/code&gt;. The content pointed to is read-only; the string cannot be modified through this pointer.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;T&lt;/code&gt; Infix:&lt;/strong&gt; Means the type is &lt;code&gt;TCHAR&lt;/code&gt;, which adapts based on the project&amp;rsquo;s character set settings. This is for writing code that supports both ANSI and Unicode builds.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;W&lt;/code&gt; Suffix:&lt;/strong&gt; Means &amp;ldquo;Wide,&amp;rdquo; i.e., Unicode (UTF-16).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;STR&lt;/code&gt; Suffix:&lt;/strong&gt; Means &amp;ldquo;String&amp;rdquo; (a NULL-terminated character array).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modern Windows Development Practice:&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;It is highly recommended to always use Unicode builds&lt;/strong&gt; (set &amp;ldquo;Character Set&amp;rdquo; to &amp;ldquo;Use Unicode Character Set&amp;rdquo; in Visual Studio project properties). This defines the &lt;code&gt;_UNICODE&lt;/code&gt; macro.&lt;/li&gt;
&lt;li&gt;In Unicode builds:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;TCHAR&lt;/code&gt; = &lt;code&gt;WCHAR&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LPTSTR&lt;/code&gt; = &lt;code&gt;LPWSTR&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LPCTSTR&lt;/code&gt; = &lt;code&gt;LPCWSTR&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Directly using &lt;code&gt;LPCWSTR&lt;/code&gt;/&lt;code&gt;LPWSTR&lt;/code&gt; or their aliases like &lt;code&gt;std::wstring&lt;/code&gt; (in C++) is often clearer and avoids the ambiguity of the &lt;code&gt;TCHAR&lt;/code&gt; family, unless you explicitly need to maintain legacy codebases that support both ANSI/Unicode.&lt;/li&gt;
&lt;li&gt;ANSI (&lt;code&gt;LPSTR&lt;/code&gt;/&lt;code&gt;LPCSTR&lt;/code&gt;) API functions often internally convert the string to Unicode and call the corresponding Unicode version, incurring performance overhead and potential character set conversion issues. Prefer using the explicit Unicode (W) version APIs.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Compatibility:&lt;/strong&gt; The &lt;code&gt;TCHAR&lt;/code&gt; family exists mainly for compatibility with old Windows 9x systems (which primarily used ANSI) and modern NT systems (native Unicode). Modern development (Windows 2000 and later) should prefer Unicode.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Simple Mnemonic:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;See &lt;code&gt;W&lt;/code&gt; -&amp;gt; Unicode.&lt;/li&gt;
&lt;li&gt;See &lt;code&gt;C&lt;/code&gt; -&amp;gt; &lt;code&gt;const&lt;/code&gt; (cannot modify string content).&lt;/li&gt;
&lt;li&gt;See &lt;code&gt;T&lt;/code&gt; -&amp;gt; Adaptive, changes to ANSI or Unicode based on project settings.&lt;/li&gt;
&lt;li&gt;No &lt;code&gt;W&lt;/code&gt; and no &lt;code&gt;T&lt;/code&gt; -&amp;gt; ANSI.&lt;/li&gt;
&lt;li&gt;No &lt;code&gt;C&lt;/code&gt; -&amp;gt; String content can be modified (non-constant).&lt;/li&gt;
&lt;li&gt;Has &lt;code&gt;C&lt;/code&gt; -&amp;gt; String content is read-only (constant).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Usage Advice:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;New projects: &lt;strong&gt;Always enable Unicode build (&lt;code&gt;_UNICODE&lt;/code&gt; defined)&lt;/strong&gt;. Prefer using &lt;code&gt;LPCWSTR&lt;/code&gt; (input parameters) and &lt;code&gt;LPWSTR&lt;/code&gt; (output parameters), or in C++, use &lt;code&gt;const wchar_t*&lt;/code&gt; and &lt;code&gt;std::wstring&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Maintaining old projects/needing ANSI compatibility: Use &lt;code&gt;LPCTSTR&lt;/code&gt; (input) and &lt;code&gt;LPTSTR&lt;/code&gt; (output) or the corresponding &lt;code&gt;TCHAR&lt;/code&gt; base types, and ensure correct handling of the &lt;code&gt;_UNICODE&lt;/code&gt; macro definition.&lt;/li&gt;
&lt;li&gt;When interacting with Windows API, note that API functions usually have A (ANSI) and W (Wide/Unicode) versions (e.g., &lt;code&gt;MessageBoxA&lt;/code&gt; and &lt;code&gt;MessageBoxW&lt;/code&gt;). Using the generic macro &lt;code&gt;MessageBox&lt;/code&gt; automatically selects the correct version based on &lt;code&gt;_UNICODE&lt;/code&gt;. The passed string pointer types must also match (&lt;code&gt;LPCSTR&lt;/code&gt; for A version, &lt;code&gt;LPCWSTR&lt;/code&gt; for W version, &lt;code&gt;LPCTSTR&lt;/code&gt; for the generic macro).&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
  </channel>
</rss>
